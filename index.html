<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TAMIL VM LIVE TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://unpkg.com/video.js/dist/video-js.css" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<script src="https://unpkg.com/video.js/dist/video.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<style>
body{background:#000;color:#fff}
.header{
 position:fixed;
 top:0;left:0;
 width:100%;
 background:#111;
 z-index:9999;
 padding:10px;
}
.video-js{width:100%;height:220px}
.container{margin-top:260px}
.channel{
 border:1px solid #444;
 margin-bottom:10px;
 padding:5px;
 cursor:pointer;
 text-align:center;
}
.channel img{
 width:100%;
 height:120px;
 object-fit:contain;
}
.channel p{
 font-size:12px;
 margin:5px 0 0;
}
</style>
</head>

<body>

<!-- PLAYER -->
<div class="header">
 <h4 class="text-warning text-center">TAMIL VM LIVE TV</h4>
 <video id="tvPlayer" class="video-js vjs-default-skin" controls autoplay></video>
</div>

<!-- CHANNEL GRID -->
<div class="container">
 <div class="row" id="channelList"></div>
</div>

<script>
const M3U_URL = "https://vmfm.github.io/tamilvmtv/live/channels.m3u";
const player = videojs('tvPlayer');

fetch(M3U_URL)
 .then(res => res.text())
 .then(data => {
   const lines = data.split('\n');
   let channels = [];

   for (let i = 0; i < lines.length; i++) {
     if (lines[i].startsWith('#EXTINF')) {
       const name = lines[i].split(',').pop().trim();
       const logoMatch = lines[i].match(/tvg-logo="(.*?)"/);
       const logo = logoMatch ? logoMatch[1] : 'https://via.placeholder.com/300x200?text=TV';
       const url = lines[i + 1]?.trim();

       if (url && url.startsWith('http')) {
         channels.push({ name, logo, url });
       }
     }
   }

   channels.forEach(ch => {
     $('#channelList').append(`
       <div class="col-4 col-md-2">
         <div class="channel" data-src="${ch.url}">
           <img src="${ch.logo}">
           <p>${ch.name}</p>
         </div>
       </div>
     `);
   });
 });

$(document).on('click', '.channel', function(){
 player.src({ src: $(this).data('src'), type: 'application/x-mpegURL' });
 player.play();
 window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>

</body>
</html>
